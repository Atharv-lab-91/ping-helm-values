global:
  ingress:
    enabled: true 
  envFromSecrets: []

pingfederate-admin:
  enabled: true
#@  envFrom:
#    - secretRef:s
#        name: devops-secret
  # Inject all passwords directly from the Kubernetes secret
#  adminPasswordSecret:
#    name: pingfederate-admin-password
#    key: administrativeAccounts_items_Administrator_password

  image:
    name: pingfederate
    tag: "latest"
    pullPolicy: IfNotPresent

  secretVolumes:
    pingfederate-license:
      items:
        pingfederate.lic: /opt/in/instance/server/default/conf/pingfederate.lic

  container:
    resources:
      requests:
        cpu: 0
        memory: 2Gi
      limits:
        cpu: 2
        memory: 6Gi
    # Optional: increase startup probe to give PingFederate time to start
    startupProbe:
      exec:
        command:
          - "/opt/liveness.sh"
      periodSeconds: 15
      failureThreshold: 60

  envs:
    SERVER_PROFILE_URL: "https://github.com/Atharv-lab-91/ping-server-profile.git"
    SERVER_PROFILE_PATH: "baseline/pingfederate"
    SERVER_PROFILE_BRANCH: "main"
    PING_IDENTITY_ACCEPT_EULA: "YES"
    PF_ADMIN_PUBLIC_HOSTNAME: "localhost:9999"
    PF_ADMIN_PUBLIC_BASEURL: "https://localhost:9999"

  envFrom:
    - secretRef:
        name: pf-admin-password 
        optional: true

  workload:
    type: Deployment

  services:
    https:
      enabled: true
      serviceType: NodePort
      servicePort: 9999
      containerPort: 9999
      nodePort: 30099
      dataService: true
